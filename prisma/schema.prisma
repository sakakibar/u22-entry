generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider   = "postgresql"
  url        = env("DATABASE_URL")
  directUrl  = env("DIRECT_URL")
}

model users {
  userID     String   @id @default(cuid())
  username   String
  mail       String   @unique
  password   String
  age        Int?
  gender     String?
  icon       String?
  bio        String?
  created_at DateTime @default(now())

  diaries    Diary[]  // ここも単数形モデル名に対応
}

model Diary {
  diaryID    String   @id @default(cuid())
  poster     String
  title      String
  score      String?
  weather    String?
  people     String?
  hobby      String?
  mood       String?
  content    String
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  user       users    @relation(fields: [poster], references: [userID])
  musics     musics[]
}

model musics {
  musicID         String   @id @default(cuid())
  title           String
  music_url       String
  generation_type String?
  parameters      String?
  created_at      DateTime @default(now())

  diaryID         String
  diary           Diary    @relation(fields: [diaryID], references: [diaryID])
}
